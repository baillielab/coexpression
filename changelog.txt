
###############################################################################
#v0.11 - added Alan's correlation script
#v0.12 - uses bedtools for mapping
#v0.13 - deleted old mapping scripts; added gene name/bonus promoter capability
#v0.15 - re-implemented node-specific pvalue
#v0.16 - added anticorrelation
#v0.17 - moved nsp calculation to end to minimise workload
#v0.18 - added alert to number of distinct regions. debugging. Fixed original p value, supplementary label, confirm_alive, subprocess
#v0.19 - remove unnecessary comments and options, deprecated functions
#v0.20 - create permstore file, start where left off with permutations.
#v0.21 - read seedfile to "seed" network with known hits
#v0.22 - plug in seedfile
#v0.23 - restart job if excessive memory used. Iterative removal corrected so that identical scores are preserved. Collect garbage. Fix original p values bug.
#v0.24 - fix bug in post-mapping perms - shift 0 was not appended so real data not run.
#v0.25 - fix bug in post mapping permstore
#v0.26 - include option to export edge weights from permutations - for allgwas analysis
#v0.27 - bug fixes (filenames corrected to remove '.')
#v0.28 - switching input files, version upgrade for safety. Removed some deprecated options including multiple expression dicts.
#v0.29 - stable for initial paramaterisaion excercise
#v0.30 - stable for initial analyses
#v0.31 - fix layoutfile to make output more informative, remove deprecated search_ranges
#v0.32 - code freeze for paramaterisation and analysis
#v0.33 - making code easier to read, duplicate online files, rename snp_details, re-enable direct promoter entry
#v0.34 - eliminate post-permutations limit on number of distinct regions
#v0.35 - start to add background permutations, rewrite joining instructions
#v0.36 - remove old joining instructions method, finish adding background perms
#v0.37 - add background circular (backcirc) permutations, fix noiter notation.
#v0.38 - additional notifications, fix backcirc, fix address displacement by 1 in bedfile
#v0.39 - add option of simple circular psot perms, add node-specific all the way, put pval to join back in as function. Change defaults to reflect optimisation. Fix get_gwad chrMT error
#v0.40 - write output file for circos, fix glitch reading post-perms snps_mapped file, square coex scores option added, increase nsp permutation number, add selectionthreshold_is_j option
#v0.41 - restructure nsp for efficiency, search for relevant permutations from other runs, output scatter file in record edges mode. nsp becomes precision measure.
#v0.42 - fix error - wrong correlation used for joining instructions.
#v0.43 - reconstruct joining algorithm, change exp_dict reading. uberv introduced.
#v0.44 - remove duplicate functions. Correct genomelength error + snp counting for htmlstats. Add check linelen when reading mapfile. Include expression file in globalperms list. Add specialbedfile option. Take title off qq. Remove different label for duplicate prom ids. Reduce iterations to randomise POST(to 2,4,bigcount=2).
#v0.45 - fix remove overlaps function to include last item in list. Switch to enhancers+/-0 as default, full nsp renamed from "perfect" to "complete"
#v0.46 - relocate source files for easy sharing, fix read_expression, fix error if indjoined empty at 1850
#v0.47 - offer average coexpression score instead of sum
#v0.48 - crude removal of duplicates from nearby_groups
#v0.49 - move removal of duplicates to "reduce_unique_sets" function; remove pylab from qq plot
#v0.50 - duplicate functions removed ('centile' and 'empiricalp')
#v0.51 - elegant processing of join_nearby and removal of reduce_unique_sets.
#v0.52 - tidy up import of modules, change limits within post perm generator, handle errors in correlationfile
#v0.53 - for optimisation
#v0.54 - move sort out of c++ script
#v0.55 - added np. prefixes to functions fdr_correction and _ecdf
#v0.56 - added more np. prefixes and ran tests
#v0.57 - change RAM limits and interaction with scheduling files, fix individual_results format, output min original p not max
#v0.58 - failed attempt to control memory usage
#v0.59 - accept a background file that doesn't contain all SNPs (for use with immunochip results), correct f5resource link, move runcommand
#v0.60 - change way post mapping permutations are made to more accurately reflect background.
#v0.61 - add new output file reporting scores for every promoter/TSS: "allscores.txt"
#v0.62 - sort allscores output
#v0.63 - add second round of coex score calculation at group level to limit the influence of large groups. ie each winner is chosen for having largest coex score with all other groups; all_labels redefined to be exp_dict.keys()
#v1.0 - publication version. switch to accepting raw pvalues rather than log p
#v1.03 - specify search window to intersectbed; use config file, switch to argparse, remove commonlabel option
#v1.04 - tidy up imports, skip comments in input file, fix reading -f argument
#v1.05 - working changes to monitor progress with a view to scaling up to large networks
#v1.10 - modularise for runing on HPC. change permutation choice input
#v1.20 - fix glitches in modularisation. create runlocal.py script to test on local server. Switch from arguments to settings.txt file as data source.
###############################################################################